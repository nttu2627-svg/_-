# 專案主要檔案架構整理

## `Map (1)/Map`
```
Map (1)/Map/
│
├── 📂 Assets/                         # Unity 主要資產與專案內容
│   ├── 📂 Prefabs/                    # 遊戲內常用預製物
│   │   ├── 📂 Agents/                 # 16 種 MBTI 代理人與對話泡泡
│   │   │   ├── 📄 AgentBubble.prefab
│   │   │   ├── 📄 ENFJ.prefab、INTJ.prefab…（共 16 種 MBTI 類型）
│   │   └── 📂 UI/                     # 介面元件預製物
│   │       ├── 📄 CameraButtonPrefab.prefab
│   │       ├── 📄 LogEntryTemplate.prefab
│   │       └── 📄 MbtiTogglePrefab.prefab
│   ├── 📂 Scripts/                    # 核心腳本程式碼
│   │   ├── 📂 Agent/                  # 代理人顯示與控制
│   │   │   ├── 📄 AgentBubbleController.cs
│   │   │   └── 📄 AgentController.cs
│   │   ├── 📂 Building/               # 建築互動
│   │   │   └── 📄 BuildingController.cs
│   │   ├── 📂 Camera/                 # 攝影機控制
│   │   │   └── 📄 CameraManager.cs
│   │   ├── 📂 UI/                     # 介面控制腳本
│   │   │   ├── 📄 LogEntry.cs
│   │   │   ├── 📄 LogPanelController.cs
│   │   │   ├── 📄 LogScrollView.cs
│   │   │   ├── 📄 ResultPanelController.cs
│   │   │   └── 📄 UIPanelController.cs
│   │   ├── 📂 World/                  # 場景互動邏輯
│   │   │   ├── 📄 PortalController.cs
│   │   │   └── 📄 Teleportable2D.cs
│   │   ├── 📂 ThirdParty/             # 第三方套件腳本
│   │   │   └── 📄 NativeWebSocket.cs
│   │   ├── 📂 Utility/                # 公用工具
│   │   │   └── 📄 LocationNameLocalizer..cs
│   │   ├── 📄 CameraController.cs     # 攝影機輸入邏輯
│   │   ├── 📄 DataModels.cs           # WebSocket 前端資料模型
│   │   ├── 📄 Panel.cs                # 面板切換共用邏輯
│   │   ├── 📄 SceneController.cs      # 場景載入管理
│   │   ├── 📄 SimulationClient.cs     # 與後端溝通
│   │   ├── 📄 UIController.cs、UIManager.cs
│   │   └── 📄 UnityMainThreadDispatcher.cs
│   ├── 📂 Scenes/                     # Unity 場景
│   │   └── 📄 CityScene.unity          # 主要城市場景
│   ├── 📂 Fonts/                      # 字型資產（Emoji 列表）
│   ├── 📂 Modern_Exteriors_16x16/     # 城市外觀圖塊素材
│   ├── 📂 Pixel Art Top Down - Basic/  # 俯視素材與範例場景
│   ├── 📂 moderninteriors-win/        # 室內像素素材
│   └── 📂 TextMesh Pro/               # TMP 樣本與資源
├── 📄 Assembly-CSharp.csproj          # Unity C# 專案設定
└── 📄 Map.sln                         # Unity 產生的解決方案
```

## `ai_china_town-master`
```
ai_china_town-master/
│
├── 📄 README.md                       # 專案說明
├── 📄 requirements.txt                # Python 套件需求
├── 📂 agents/                         # 16 種 MBTI 代理人設定檔
│   └── 📄 ENFJ/1.txt、INTJ/1.txt …    # 代理人初始資料
├── 📂 simulation_logic/               # 核心模擬邏輯模組
│   ├── 📄 agent_actions.py            # 行為決策
│   ├── 📄 agent_classes.py            # 代理人類別定義
│   ├── 📄 agent_memory.py             # 記憶管理
│   ├── 📄 disaster_logger.py          # 災害紀錄工具
│   ├── 📄 event_handler.py            # 事件驅動流程
│   └── 📄 schedule_manager.py         # 行程安排
├── 📂 src/                            # 主程式與資料
│   ├── 📄 main.py、main_quake.py…     # 不同模擬進入點，主要執行程式為main_quake2.py
│   ├── 📄 unity_socket_main.py        # Unity 通訊主程式
│   ├── 📂 data/                       # 模擬所需 JSON 資料
│   │   └── 📄 schedules.json
│   └── 📂 main_back/                  # 備份主程式
│       ├── 📄 main.py
│       ├── 📄 main_quake1.py
│       └── 📄 main_quake2 copy.py
├── 📂 tools/                          # LLM 與資料庫工具
│   ├── 📂 Database/                   # 向量資料庫操作
│   │   └── 📄 Pgvector_op.py
│   └── 📂 LLM/                        # 語言模型介接與提示詞
│       ├── 📄 deepseek_agent.py、ollama_agent.py、qwen_turbo_agent.py
│       ├── 📄 emoji_rules.py
│       ├── 📄 run_gpt_prompt.py
│       └── 📂 prompt_template/        # 中文提示詞範本
│           └── 📄 生成內心獨白.txt、生成日程安排时间表.txt 等
├── 📂 log/                            # 模擬紀錄
│   └── 📂 7.19/                        # 日期紀錄
│       ├── 📄 7.19 模擬紀錄.txt
│       ├── 📄 LLM調用.txt
│       └── 📄 代理人狀態.txt
├── 📂 readme_img/                     # README 使用的圖像
├── 📂 test/                           # 測試腳本與範例
│   ├── 📄 test01.py、test02.py
│   ├── 📄 unity测试控制角色移动.py
│   └── 📄 获取路径提示词内容.py
└── 📂 tools/LLM/__pycache__、src/__pycache__ 等快取目錄
```